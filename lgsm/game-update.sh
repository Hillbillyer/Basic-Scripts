#!/bin/bash

#Machine Updates
clear
echo "
 ██████   ██████                   █████      ███                          
░░██████ ██████                   ░░███      ░░░                           
 ░███░█████░███   ██████    ██████ ░███████  ████ ████████    ██████       
 ░███░░███ ░███  ░░░░░███  ███░░███░███░░███░░███░░███░░███  ███░░███      
 ░███ ░░░  ░███   ███████ ░███ ░░░ ░███ ░███ ░███ ░███ ░███ ░███████       
 ░███      ░███  ███░░███ ░███  ███░███ ░███ ░███ ░███ ░███ ░███░░░        
 █████     █████░░████████░░██████ ████ ██████████████ █████░░██████       
░░░░░     ░░░░░  ░░░░░░░░  ░░░░░░ ░░░░ ░░░░░░░░░░░░░░ ░░░░░  ░░░░░░        
 █████  █████              █████           █████    ███                    
░░███  ░░███              ░░███           ░░███    ░░░                     
 ░███   ░███ ████████   ███████   ██████  ███████  ████ ████████    ███████
 ░███   ░███░░███░░███ ███░░███  ░░░░░███░░░███░  ░░███░░███░░███  ███░░███
 ░███   ░███ ░███ ░███░███ ░███   ███████  ░███    ░███ ░███ ░███ ░███ ░███
 ░███   ░███ ░███ ░███░███ ░███  ███░░███  ░███ ███░███ ░███ ░███ ░███ ░███
 ░░████████  ░███████ ░░████████░░████████ ░░█████ █████████ █████░░███████
  ░░░░░░░░   ░███░░░   ░░░░░░░░  ░░░░░░░░   ░░░░░ ░░░░░░░░░ ░░░░░  ░░░░░███
             ░███                                                  ███ ░███
             █████                                                ░░██████ 
            ░░░░░                                                  ░░░░░░  
"
sleep 3s
clear
                # Update package lists
                sudo apt update

                # Upgrade installed packages
                sudo apt upgrade -y

                # Upgrade the distribution (including the OS)
                sudo apt dist-upgrade -y

                # Remove unnecessary files
                sudo apt autoremove -y
                sudo apt clean
                sleep 2s
clear
echo "
   █████████                                                       
  ███░░░░░███                                                      
 ███     ░░░  ██████  █████████████    ██████                      
░███         ░░░░░███░░███░░███░░███  ███░░███                     
░███    █████ ███████ ░███ ░███ ░███ ░███████                      
░░███  ░░███ ███░░███ ░███ ░███ ░███ ░███░░░                       
 ░░█████████░░█████████████░███ █████░░██████                      
  ░░░░░░░░░  ░░░░░░░░░░░░░ ░░░ ░░░░░  ░░░░░░                       
  █████████                                                        
 ███░░░░░███                                                       
░███    ░░░   ██████  ████████  █████ █████ ██████  ████████       
░░█████████  ███░░███░░███░░███░░███ ░░███ ███░░███░░███░░███      
 ░░░░░░░░███░███████  ░███ ░░░  ░███  ░███░███████  ░███ ░░░       
 ███    ░███░███░░░   ░███      ░░███ ███ ░███░░░   ░███           
░░█████████ ░░██████  █████      ░░█████  ░░██████  █████          
 ░░░░░░░░░   ░░░░░░  ░░░░░        ░░░░░    ░░░░░░  ░░░░░           
 █████  █████              █████           █████                   
░░███  ░░███              ░░███           ░░███                    
 ░███   ░███ ████████   ███████   ██████  ███████    ██████  █████ 
 ░███   ░███░░███░░███ ███░░███  ░░░░░███░░░███░    ███░░██████░░  
 ░███   ░███ ░███ ░███░███ ░███   ███████  ░███    ░███████░░█████ 
 ░███   ░███ ░███ ░███░███ ░███  ███░░███  ░███ ███░███░░░  ░░░░███
 ░░████████  ░███████ ░░████████░░████████ ░░█████ ░░██████ ██████ 
  ░░░░░░░░   ░███░░░   ░░░░░░░░  ░░░░░░░░   ░░░░░   ░░░░░░ ░░░░░░  
             ░███                                                  
             █████                                                 
            ░░░░░                                                  
"
sleep 3s
clear
#Copy List of Current LGSM Servers
echo "--==Grabbing Server List==--"
sleep 3s
wget -O hills-scripts/lgsm/serverlist.csv https://raw.githubusercontent.com/GameServerManagers/LinuxGSM/master/lgsm/data/serverlist.csv
clear
#Create Game Server Variables
echo "--==Updating Game Servers==--"
sleep 3s
clear
# Updates Currently Installed Game Servers
while IFS="," read shortname gameservername gamename os;
do 
    clear
    sudo -u ${shortname} echo '--=='${gamename}' Stopping==--' && sudo -u ${shortname} ./'${shortname}'server stop && clear >> /tmp/game-update-error.log 2>&1
    sudo -u ${shortname} echo '--=='${gamename}' Updating==--' && sudo -u ${shortname} ./'${shortname}'server update && clear >> /tmp/game-update-error.log 2>&1
    sudo -u ${shortname} echo '--=='${gamename}' LGSM Config Updating==--' && sudo -u ${shortname} ./'${shortname}'server update-lgsm && clear >> /tmp/game-update-error.log 2>&1
    sudo -u ${shortname} echo '--=='${gamename}' Starting==--' && sudo -u ${shortname} ./'${shortname}'server start && clear >> /tmp/game-update-error.log 2>&1
done < hills-scripts/lgsm/serverlist.csv
clear
#Alerts Scripts has Completed
echo "
  █████████                                                                                      
 ███░░░░░███                                                                                     
░███    ░░░   ██████  ████████  █████ █████ ██████  ████████ █████                               
░░█████████  ███░░███░░███░░███░░███ ░░███ ███░░███░░███░░█████░░                                
 ░░░░░░░░███░███████  ░███ ░░░  ░███  ░███░███████  ░███ ░░░░█████                               
 ███    ░███░███░░░   ░███      ░░███ ███ ░███░░░   ░███    ░░░░███                              
░░█████████ ░░██████  █████      ░░█████  ░░██████  █████   ██████                               
 ░░░░░░░░░   ░░░░░░  ░░░░░        ░░░░░    ░░░░░░  ░░░░░   ░░░░░░                                
 █████  █████                 ███████████                 ██████████            █████            
░░███  ░░███                 ░█░░░███░░░█                ░░███░░░░███          ░░███             
 ░███   ░███ ████████        ░   ░███  ░██████            ░███   ░░███ ██████  ███████    ██████ 
 ░███   ░███░░███░░███ ██████████░███  ███░░███ ██████████░███    ░███░░░░░███░░░███░    ███░░███
 ░███   ░███ ░███ ░███░░░░░░░░░░ ░███ ░███ ░███░░░░░░░░░░ ░███    ░███ ███████  ░███    ░███████ 
 ░███   ░███ ░███ ░███           ░███ ░███ ░███           ░███    ███ ███░░███  ░███ ███░███░░░  
 ░░████████  ░███████            █████░░██████            ██████████ ░░████████ ░░█████ ░░██████ 
  ░░░░░░░░   ░███░░░            ░░░░░  ░░░░░░            ░░░░░░░░░░   ░░░░░░░░   ░░░░░   ░░░░░░  
             ░███                                                                                
             █████                                                                               
            ░░░░░                                                                                
"
sleep 3s && clear



# Intellectual Property
echo "Script By: "
echo "
 █████   █████ ███ ████ ████ █████      ███ ████ ████                             
░░███   ░░███ ░░░ ░░███░░███░░███      ░░░ ░░███░░███                             
 ░███    ░███ ████ ░███ ░███ ░███████  ████ ░███ ░███ █████ ████ ██████  ████████ 
 ░███████████░░███ ░███ ░███ ░███░░███░░███ ░███ ░███░░███ ░███ ███░░███░░███░░███
 ░███░░░░░███ ░███ ░███ ░███ ░███ ░███ ░███ ░███ ░███ ░███ ░███░███████  ░███ ░░░ 
 ░███    ░███ ░███ ░███ ░███ ░███ ░███ ░███ ░███ ░███ ░███ ░███░███░░░   ░███     
 █████   ████████████████████████████  ███████████████░░███████░░██████  █████    
░░░░░   ░░░░░░░░░░░░░░░░░░░░░░░░░░░░  ░░░░░░░░░░░░░░░  ░░░░░███ ░░░░░░  ░░░░░     
                                                       ███ ░███                   
                                                      ░░██████                    
                                                       ░░░░░░                     
"
echo "https://hillbillyer.net"
echo "contact@hillbillyer.net"
